# @configure_input@

top_builddir = @abs_top_builddir@
srcdir       = @srcdir@
prefix       = @prefix@
exec_prefix  = @exec_prefix@
bindir       = @bindir@
libdir       = @libdir@
includedir   = @includedir@
datarootdir  = @datarootdir@
runstatedir  = @runstatedir@
datadir      = @datadir@
mandir       = @mandir@

VPATH = @srcdir@

INSTALL_OPTIONS  =
INSTALL          = @INSTALL@ $(INSTALL_OPTIONS)
INSTALL_DATA_DIR = @INSTALL_DATA_DIR@
INSTALL_DATA     = @INSTALL_DATA@
INSTALL_PROGRAM  = @INSTALL_PROGRAM@
INSTALL_SCRIPT   = @INSTALL_SCRIPT@
INSTALL_LIBRARY  = @INSTALL_LIBRARY@

PACKAGE_NAME    = @PACKAGE_NAME@
PACKAGE_VERSION = @PACKAGE_VERSION@
PACKAGE_TARNAME = @PACKAGE_TARNAME@

TCL_BIN_DIR	= @TCL_BIN_DIR@
TCL_SRC_DIR	= @TCL_SRC_DIR@
#TK_BIN_DIR	= @TK_BIN_DIR@
#TK_SRC_DIR	= @TK_SRC_DIR@

EXTRA_PATH  = $(top_builddir):$(TCL_BIN_DIR):$(TCL_BIN_DIR)/../bin
#EXTRA_PATH = $(top_builddir):$(TCL_BIN_DIR):$(TK_BIN_DIR)
TCLLIBPATH  = $(top_builddir)
TCLSH_ENV   = TCL_LIBRARY=`@CYGPATH@ $(TCL_SRC_DIR)/library`

PKG_ENV = @LD_LIBRARY_PATH_VAR@="$(EXTRA_PATH):$(@LD_LIBRARY_PATH_VAR@)" \
	PATH="$(EXTRA_PATH):$(PATH)" \
	TCLLIBPATH="$(TCLLIBPATH)"

TCLSH_PROG = @TCLSH_PROG@
TCLSH      = $(TCLSH_ENV) $(PKG_ENV) $(TCLSH_PROG)

all: tclcompiler tclparser apps

tclcompiler:
	cd lib/tclcompiler && $(MAKE) all

tclparser:
	cd lib/tclparser && $(MAKE) all

apps: apps/tclapp

apps/tclapp:
	mkdir apps
	$(TCLSH) `@CYGPATH@ $(srcdir)/app/tclapp/entry.tcl`

clean:
	cd lib/tclcompiler && $(MAKE) $@
	cd lib/tclparser   && $(MAKE) $@

Makefile: $(srcdir)/Makefile.in config.status
	./config.status $@

config.status: configure
	./config.status --recheck

#.PHONY: FORCE all clean check dist distcheck install uninstall

.PHONY: all apps clean
